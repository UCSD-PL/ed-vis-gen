<html>
<head>
    <title>Vis Gen DSL</title>

    <script src="src/helpers.js" type="text/javascript"> </script>
    <script src="src/primitives.js" type="text/javascript"></script>
    <script src="src/library.js" type="text/javascript"></script>
    <script src="src/mechanics.js" type="text/javascript"></script>
</head>

<body>
<canvas id="mainCanvas" width="100%" height="100%">
</canvas>

</body>
<script>
    //var img = document.createElement("pig");
    //img.src="resources/pig.png";
    //img.onload = function() {

      var c = document.getElementById("mainCanvas");
      var ctx = c.getContext("2d");
      ctx.canvas.width  = window.innerWidth-20;
      ctx.canvas.height = window.innerHeight-20;
      global_ctx = ctx;
      init();
      c.addEventListener("mousedown", doMouseDown);
      c.addEventListener("mouseup", doMouseUp);
      c.addEventListener("mousemove", doMouseMove);

      draw_all(ctx);
      var tau = Timer(100, function(t){
        update_constraints(t);
        global_redraw();
      }); // executes every 100ms (.1s)
      tau.start();
      
      // loop animation
      setInterval(function() {
        tau.stop();
        tau.reset();
        tau.start();
      }, 2000);

</script>
</html>
