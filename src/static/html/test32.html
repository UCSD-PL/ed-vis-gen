<html>

<!-- TODO -->

<title>
  EDDIE Educational Diagram Toolkit
</title>

<head>
    <img id='mouse' style='display:none;' src='https://3.bp.blogspot.com/-AjVCqXvl25E/U3XUGxQ4zmI/AAAAAAAAAds/MNDt3MLS-2w/s1600/curser.png' />
    <!-- frontend script -->
    <script src="../frontend/fabric.js"></script>
    <script src="../frontend/fabricEX.js"></script>
    <script src="../frontend/jquery.js"></script>
    <!--stops the default right-click menu from opening-->
    <script>
      $(document).bind('contextmenu', function(e) {
        e.preventDefault();
      });
    </script>

    <!-- Style -->
    <link rel="stylesheet" href="../frontend/mockup/app/css/normalize.css">
    <link rel="stylesheet" href="../frontend/mockup/app/components/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="../frontend/mockup/app/css/main.css">

    <!-- jQuery library -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> -->

    <!-- Latest compiled JavaScript -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"/>
    <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
    <style>
      .carousel-control, .carousel-control.left, .carousel-control.right,
      .carousel-control:focus, .carousel-control:hover {
        background-image: none !important;
        font-size: 30px;
        color: royalblue;
      }
    </style>
</head>

<style>
  h1{
    float: right;
    font-family: monospace;
  }
  .leftbuttons{
    /*float: left;*/
  }

  .rightbuttons{
    /*width: 100%;*/
    text-align: right;
    /*float: right;*/
  }

  .charts{
    float: right;
  }
  body {
    margin: 10;
    font-family: 'Lato', sans-serif;
    background-color: royalblue;
  }
  .canvas-container{
    margin: 0 auto;
  }
  .overlay {
      text-align: center;
      height: 0%;
      width: 50%;
      position: fixed;
      z-index: 1;
      top: 25%;
      left: 25%;
      background-color: rgb(0,0,0);
      background-color: #ffffff;
      overflow-y: hidden;
      transition: 0.5s;
  }
  .overlay-selection {
      text-align: center;
      position: relative;
      height: 0%;
      width: 100%;
      position: fixed;
      z-index: 1;
      top: 0;
      left: 0;
      background-color: rgb(0,0,0);
      background-color: #ffffff;
      overflow-y: hidden;
      transition: 0.5s;
  }
  .overlay-content {
      position: relative;
      top: 10%;
      width: 100%;
      text-align: center;
      margin-top: 30px;
  }
  .closebtn {
      position: absolute;
      top: 20px;
      right: 45px;
      font-size: 60px !important;
  }
  @media screen and (max-height: 450px) {
    .overlay {overflow-y: auto;}
    .closebtn {
      font-size: 40px !important;
      top: 15px;
      right: 35px;
    }
}
</style>

<style>
  .toggle-on { background-color: royalblue; }
</style>

<body>

  <div id="draw">
    <canvas id="canvas" width="0" height="0" style="position: absolute; display:hidden;"></canvas>
  </div>

  <div class="container-fluid">
    <nav class="navbar navbar-default navbar-static-top">
      <a href="#" class="navbar-brand">EDDIE</a>
      <ul class="nav navbar-nav pull-right">
        <li>
          <a href="http://goto.ucsd.edu/~john/EDDIE/faq3.html" target="_">FAQ</a>
        </li>
      </ul>
    </nav>
    <div class="row">
      <div class="col-md-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            Editor
          </div>
          <div class="panel-body">
            <div class="carousel slide" id="mySelect" tabindex="-1" aria-labelledby="mySelectLabel">
              <div class="carousel-dialog" role="document">
                <div class="carousel-content">
                  <div class="carousel-body">
                    <div class="overlay-content">
                      <canvas id="sims" width="300" height="475"></canvas>
                    </div>

                    <a class="left carousel-control" role="button" data-slide="prev" onclick="onLeft()" id="left">
                      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                      <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" role="button" data-slide="next" onclick="onRight()" id="right">
                      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                      <span class="sr-only">Next</span>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            Preview
          </div>
          <div class="panel-body">
            <div id="simulate">
              <video width="500" height="500" autoplay="autoplay" loop="loop">
              <source src="http://goto.ucsd.edu/~john/EDDIE/vids/test2.mp4" type="video/mp4"/>
              </video>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>





    <!--more frontend scripts-->
    <script src="../frontend/objects.js"></script>
    <script src="../frontend/fabrication.js"></script>
    <script src="../frontend/dragpoints.js"></script>
    <script src="../frontend/spring.js"></script>
    <script src="../frontend/snapping.js"></script>
    <script src="../frontend/undo.js"></script>
      <!-- backend script -->
    <script src="../lib.js"></script>

    <!-- scripts for toggle buttons -->





      <script>

      // JSON.stringify(canvas.toJSON(['shouldMove']))

      let strDater = '{"objects":[{"name":"S0","type":"rect","physics":"none","item":"","originX":"left","originY":"top","left":128,"top":101,"width":30,"height":30,"fill":"royalblue","stroke":null,"strokeWidth":0,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":1,"scaleY":1,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","transformMatrix":null,"skewX":0,"skewY":0,"snap":true,"lockScalingX":false,"lockScalingY":false,"rx":0,"ry":0},{"name":"S19","type":"circle","physics":"none","item":"","originX":"left","originY":"top","left":9,"top":87,"width":60,"height":60,"fill":"royalblue","stroke":null,"strokeWidth":0,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":1,"scaleY":1,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","transformMatrix":null,"skewX":0,"skewY":0,"snap":true,"lockScalingX":false,"lockScalingY":false,"radius":30,"startAngle":0,"endAngle":6.283185307179586},{"name":"S38","type":"circle","physics":"none","item":"","originX":"left","originY":"top","left":158,"top":86,"width":60,"height":60,"fill":"royalblue","stroke":null,"strokeWidth":0,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":1,"scaleY":1,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","transformMatrix":null,"skewX":0,"skewY":0,"snap":true,"lockScalingX":false,"lockScalingY":false,"radius":30,"startAngle":0,"endAngle":6.283185307179586},{"name":"S57","type":"rect","physics":"none","item":"","originX":"left","originY":"top","left":68,"top":101,"width":30,"height":30,"fill":"royalblue","stroke":null,"strokeWidth":0,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":1,"scaleY":1,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","transformMatrix":null,"skewX":0,"skewY":0,"snap":true,"lockScalingX":false,"lockScalingY":false,"rx":0,"ry":0},{"name":"S95","type":"rect","physics":"none","item":"","originX":"left","originY":"top","left":98,"top":81,"width":30,"height":30,"fill":"royalblue","stroke":null,"strokeWidth":0,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":1,"scaleY":2.33,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","transformMatrix":null,"skewX":0,"skewY":0,"snap":true,"lockScalingX":false,"lockScalingY":false,"shouldMove":true,"rx":0,"ry":0},{"name":"S108","type":"dragPoint","physics":"none","item":"","originX":"center","originY":"center","left":113,"top":96,"width":10,"height":10,"fill":"orange","stroke":"black","strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":1,"scaleY":1,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","transformMatrix":null,"skewX":0,"skewY":0,"snap":true,"lockScalingX":true,"lockScalingY":true,"radius":5,"shape":{"name":"S95","type":"rect","physics":"none","item":"","originX":"left","originY":"top","left":98,"top":81,"width":30,"height":30,"fill":"royalblue","stroke":null,"strokeWidth":0,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":1,"scaleY":2.33,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","transformMatrix":null,"skewX":0,"skewY":0,"snap":true,"lockScalingX":false,"lockScalingY":false,"rx":0,"ry":0},"shapeName":"S95","X":98,"Y":81,"DX":0.5,"DY":0.5,"choice":0,"onCanvas":false,"startAngle":0,"endAngle":6.283185307179586}],"background":""}'
      canvas.loadFromJSON(JSON.parse(strDater));
      // canvas.forEachObject(console.log)
      forEachDP(dp => {
        dp.set('eddie:active', true);
      })

      fabricJSON = transfer();
      // console.log(fabricJSON);

      window.BACKEND.loadModel(fabricJSON);

      forEachDP(onLoadSims);

      // load the model and start the sims


      </script>

</html>
